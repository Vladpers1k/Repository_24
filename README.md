# Проект на Node.js та Express.js(Updated)

- Цей проект представляє собою сервер, який реалізує функціональність реєстрації, входу та захищених маршрутів з використанням Passport.js та JWT. Сервер дозволяє користувачам реєструватися, входити в акаунт, зберігати дані в базі MongoDB Atlas і використовувати захищені маршрути.

---

## Технології

- Node.js

- Express.js

- Passport.js (для авторизації)

- MongoDB Atlas (для зберігання даних)

- Mongoose (для роботи з MongoDB)

- EJS (шаблони для відображення даних на сторінці)

## Інструкція з встановлення та запуску

1. Клонуйте репозиторій:

   ```bash
   git clone <url-репозиторію>
   cd <каталог-проекту>
   ```

2. Встановіть залежності

   ```bash
   npm install
   npm install express express-session passport passport-local bcryptjs dotenv ejs connect-flash
   ```

3. Опис маршрутів

- 1.1 /register - Сторінка реєстрації
  Метод: GET

- Опис: Відображає форму для реєстрації нового користувача.

---

- 2.1 /register - Обробка реєстрації
  Метод: POST

- Опис: Приймає дані користувача, хешує пароль та зберігає його в базі MongoDB.

---

- 3.1 /login - Сторінка входу
  Метод: GET

- Опис: Відображає форму для входу в акаунт.

  ***

- 4.1 /login - Обробка входу
  Метод: POST

- Опис: Приймає дані для входу, перевіряє їх за допомогою Passport.js та редиректить на захищену сторінку при успішному вході.

  ***

- 5.1 /logout - Вихід з акаунту
  Метод: GET

- Опис: Виходить з акаунту та редиректить на сторінку входу.

  ***

- 6.1 /protected - Захищена сторінка
  Метод: GET

- Опис: Відображає захищену сторінку, доступну тільки для авторизованих користувачів. Також після входу на цю сторінку можна змінювати тему з білої на чорну і наоборт.

---

- 7.1 /data - Відображення даних з MongoDB
  Метод: GET

- Опис: Запитує дані з колекції в MongoDB та відображає їх на сторінці.

---

## Нові функціональності

- Створення даних
  POST /data/add-one — додає один документ.
  {
  "name": "John Doe",
  "email": "john.doe@example.com"
  }
- POST /data/add-many — додає кілька документів.
  [
  {"name": "Alice", "email": "alice@example.com"},
  {"name": "Bob", "email": "bob@example.com"}
  ]

- Оновлення даних
  PUT /data/update-one/:id — оновлює один документ.
  {"name": "John Smith"}

- PUT /data/update-many — оновлює кілька документів.
  {"filter": {"role": "user"}, "update": {"role": "moderator"}}

- PUT /data/replace-one/:id — замінює один документ.
  {"name": "Jane Doe", "email": "jane.doe@example.com"}

- Видалення даних
  DELETE /data/delete-one/:id — видаляє один документ.
  DELETE /data/delete-many — видаляє кілька документів.

- Покращене читання даних
  GET /data — запит даних з проекцією.
- GET /data?fields=name,email
