# –ü—Ä–æ–µ–∫—Ç –Ω–∞ Node.js —Ç–∞ Express.js(Update 1.2)

- –¶–µ–π –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —Å–æ–±–æ—é —Å–µ—Ä–≤–µ—Ä, —è–∫–∏–π —Ä–µ–∞–ª—ñ–∑—É—î —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, –≤—Ö–æ–¥—É —Ç–∞ –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Passport.js. –°–µ—Ä–≤–µ—Ä –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º —Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è, –≤—Ö–æ–¥–∏—Ç–∏ –≤ –∞–∫–∞—É–Ω—Ç, –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –¥–∞–Ω—ñ –≤ –±–∞–∑—ñ MongoDB Atlas —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–∞—Ö–∏—â–µ–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏.

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- Node.js

- Express.js

- Passport.js (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó)

- MongoDB Atlas (–¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö)

- Mongoose (–¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ MongoDB)

- EJS (—à–∞–±–ª–æ–Ω–∏ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ)

## –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫—É

1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:

   ```bash
   git clone <url-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é>
   cd <–∫–∞—Ç–∞–ª–æ–≥-–ø—Ä–æ–µ–∫—Ç—É>
   ```

2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

   ```bash
   npm install
   npm install express express-session passport passport-local bcryptjs dotenv ejs connect-flash
   ```

3. –û–ø–∏—Å –º–∞—Ä—à—Ä—É—Ç—ñ–≤

- 1.1 /register - –°—Ç–æ—Ä—ñ–Ω–∫–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
  –ú–µ—Ç–æ–¥: GET

- –û–ø–∏—Å: –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —Ñ–æ—Ä–º—É –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

---

- 2.1 /register - –û–±—Ä–æ–±–∫–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
  –ú–µ—Ç–æ–¥: POST

- –û–ø–∏—Å: –ü—Ä–∏–π–º–∞—î –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —Ö–µ—à—É—î –ø–∞—Ä–æ–ª—å —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î –π–æ–≥–æ –≤ –±–∞–∑—ñ MongoDB.

---

- 3.1 /login - –°—Ç–æ—Ä—ñ–Ω–∫–∞ –≤—Ö–æ–¥—É
  –ú–µ—Ç–æ–¥: GET

- –û–ø–∏—Å: –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —Ñ–æ—Ä–º—É –¥–ª—è –≤—Ö–æ–¥—É –≤ –∞–∫–∞—É–Ω—Ç.

  ***

- 4.1 /login - –û–±—Ä–æ–±–∫–∞ –≤—Ö–æ–¥—É
  –ú–µ—Ç–æ–¥: POST

- –û–ø–∏—Å: –ü—Ä–∏–π–º–∞—î –¥–∞–Ω—ñ –¥–ª—è –≤—Ö–æ–¥—É, –ø–µ—Ä–µ–≤—ñ—Ä—è—î —ó—Ö –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Passport.js —Ç–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –Ω–∞ –∑–∞—Ö–∏—â–µ–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø—Ä–∏ —É—Å–ø—ñ—à–Ω–æ–º—É –≤—Ö–æ–¥—ñ.

  ***

- 5.1 /logout - –í–∏—Ö—ñ–¥ –∑ –∞–∫–∞—É–Ω—Ç—É
  –ú–µ—Ç–æ–¥: GET

- –û–ø–∏—Å: –í–∏—Ö–æ–¥–∏—Ç—å –∑ –∞–∫–∞—É–Ω—Ç—É —Ç–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤—Ö–æ–¥—É.

  ***

- 6.1 /protected - –ó–∞—Ö–∏—â–µ–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
  –ú–µ—Ç–æ–¥: GET

- –û–ø–∏—Å: –í—ñ–¥–æ–±—Ä–∞–∂–∞—î –∑–∞—Ö–∏—â–µ–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É, –¥–æ—Å—Ç—É–ø–Ω—É —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. –¢–∞–∫–æ–∂ –ø—ñ—Å–ª—è –≤—Ö–æ–¥—É –Ω–∞ —Ü—é —Å—Ç–æ—Ä—ñ–Ω–∫—É –º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Ç–µ–º—É –∑ –±—ñ–ª–æ—ó –Ω–∞ —á–æ—Ä–Ω—É —ñ –Ω–∞–æ–±–æ—Ä—Ç.

---

- 7.1 /data - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ MongoDB
  –ú–µ—Ç–æ–¥: GET

- –û–ø–∏—Å: –ó–∞–ø–∏—Ç—É—î –¥–∞–Ω—ñ –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó –≤ MongoDB —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î —ó—Ö –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ.

  ## –ù–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ:

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
  POST /data/add-one ‚Äî –¥–æ–¥–∞—î –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç.
  ```json
  {
    "name": "John Doe",
    "email": "john.doe@example.com"
  }
  ```

---

- POST /data/add-many ‚Äî –¥–æ–¥–∞—î –∫—ñ–ª—å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤.

```json
[
  { "name": "Alice", "email": "alice@example.com" },
  { "name": "Bob", "email": "bob@example.com" }
]
```

---

- –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
  PUT /data/update-one/:id ‚Äî –æ–Ω–æ–≤–ª—é—î –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç.

  ```json
  { "name": "John Smith" }
  ```

---

- PUT /data/update-many ‚Äî –æ–Ω–æ–≤–ª—é—î –∫—ñ–ª—å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤.

```json
{
  "filter": { "role": "user" },
  "update": { "role": "moderator" }
}
```

#### –ü—Ä–∏–º—ñ—Ç–∫–∞:

- filter –≤–∏–∑–Ω–∞—á–∞—î, —è–∫—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –±—É–¥—É—Ç—å –æ–Ω–æ–≤–ª–µ–Ω—ñ.
- update –º—ñ—Å—Ç–∏—Ç—å –ø–æ–ª—è, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏.

---

- PUT /data/replace-one/:id ‚Äî –∑–∞–º—ñ–Ω—é—î –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç.

```json
{
  "name": "Jane Doe",
  "email": "jane.doe@example.com",
  "role": "admin",
  "password": "newpassword"
}
```

---

- –í–∏–¥–∞–ª–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  DELETE /data/delete-one/:id ‚Äî –≤–∏–¥–∞–ª—è—î –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞ –π–æ–≥–æ id.

---

- –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
  DELETE /data/delete-many ‚Äî –≤–∏–¥–∞–ª—è—î –∫—ñ–ª—å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –∑–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—î–º.
  –§–æ—Ä–º–∞—Ç —Ç—ñ–ª–∞ –∑–∞–ø–∏—Ç—É:

```json
{
  "role": "user"
}
```

---

#### üìå –ü—Ä–∏–º—ñ—Ç–∫–∞:

–ú–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫–µ –ø–æ–ª–µ –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

```json
{
  "email": "test@example.com"
}
```

---

- –ü–æ–∫—Ä–∞—â–µ–Ω–µ —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

- GET /data ‚Äî –æ—Ç—Ä–∏–º—É—î –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏.
- GET /data?fields=name,email ‚Äî –æ—Ç—Ä–∏–º—É—î —Ç—ñ–ª—å–∫–∏ name —ñ email.

---

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö

–ü—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–±–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö.

#### –ü—Ä–∏–∫–ª–∞–¥ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É:

```json
{
  "name": "Jo",
  "email": "wrongemail",
  "password": "123"
}
```

- {
  "error": "\"name\" length must be at least 3 characters long"
  }

---

#### –ü—Ä–∏–∫–ª–∞–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É:

```json
{
  "name": "John Doe",
  "email": "john.doe@example.com",
  "password": "securePassword"
}
```
